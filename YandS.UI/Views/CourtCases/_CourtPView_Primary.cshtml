<script type="text/javascript">

    $(document).ready(function () {

        console.log("_CourtPView_Primary Partial Page Loaded");
        jQuery(function ($) {
            $.validator.addMethod('date',
                function (value, element) {
                    $.culture = Globalize.culture("en-AU");
                    var date = Globalize.parseDate(value, "dd/MM/yyyy", "en-AU");
                    return this.optional(element) ||
                        !/Invalid|NaN/.test(new Date(date).toString());
                });
        });

        $('.datepicker').datepicker({
            format: "dd/mm/yyyy",
            todayBtn: "linked",
            clearBtn: true,
            autoclose: true,
            orientation: "bottom auto"
        });
        $('.select2bs4').select2({
            theme: 'bootstrap4'
        });
        //$("[id$=_CaseLevelCode]").select2({ disabled: "readonly" });

        //console.log("#Primary_CaseId");
        //console.log($("#Primary_CaseId").val());

        //console.log("#Primary_Courtid");
        //console.log($("#Primary_Courtid").val());

        //console.log("P_CaseId");
        //console.log(P_CaseId);
        //console.log("P_Courtid");
        //console.log(P_Courtid);


        P_Detail = parseInt($("#Primary_DetailId").val());

        if (P_Detail == 0) {
            console.log("No Court Primary_DetailId found! :: _CourtPView_Primary Partial Page");
        }

        LoadHearings(P_Detail);

        var form = CourtDetailContainer.closest("form");
        //console.log(form);
        //console.log(CourtDetailContainer);
        //form.removeData('validator');
        //form.removeData('unobtrusiveValidation');
        //$.validator.unobtrusive.parse(form);
        $('#Add_Primary_CourtDetail').on('click', function () {
            //e.preventDefault();
            console.log("Add_Primary_CourtDetail");
            //var form = $("#frm_Primary_CourtDetail");
            //console.log(form);

            if ($("#Primary_CourtRefNo").val() == "") {
                Swal.fire({
                    type: "error",
                    title: 'Error...',
                    html: 'Court Reference Number is Required'
                });
                return false;
            }

            if ($("#Primary_RegistrationDate").val() == "") {
                Swal.fire({
                    type: "error",
                    title: 'Error...',
                    html: 'Registration Date is Required'
                });
                return false;
            }

            //var courtCasesDetail = {};
            //$("#frm_Primary_CourtDetail .form-control").each(function () {


            //    courtCasesDetail[this.id] = this.value;

            //    console.log(this.id);
            //    console.log(this.value);

            //});

            //console.log(JSON.stringify(courtCasesDetail));

            //return false;
            $.ajax({
                url: CreatePrimaryCourtDetailURL,
                method: "POST",  // post
                //data: JSON.stringify(courtCasesDetail),
                data: $('#frm_Primary_CourtDetail :input').serialize(),
                //data: form.serialize(),
                success: function (partialResult) {
                    console.log(partialResult);
                    LoadPartialView(partialResult, CourtDetailContainer);

                    P_Detail = parseInt($("#Primary_DetailId").val());

                    if (P_Detail == 0) {
                        console.log("No Court Detail found! :: #Add_Primary_CourtDetail Function");
                    }
                    else {
                        if (ArrayCourts.indexOf("1") == -1)
                            ArrayCourts.push("1");

                        LoadHearings(P_Detail);
                    }

                }
            });
        });
    });
</script>
@model YandS.UI.Models.PrimaryCourtViewModal
<div class="card @ViewBag.CourtClass">
    <div class="card-header">
        <h3 class="card-title">@ViewBag.CourtName</h3>
        <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
        </div>
    </div>
    <!-- /.card-header -->
    <div class="card-body">
        <div id="frm_Primary_CourtDetail" class="form-horizontal">
            @Html.HiddenFor(model => model.Primary_CaseId, new { @class = "form-control" })
            @Html.HiddenFor(model => model.Primary_DetailId, new { @class = "form-control" })
            @Html.HiddenFor(model => model.Primary_Courtid, new { @class = "form-control" })
            <div class="row">
                <div class="col-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_CourtRefNo, "Primary Court No.")
                        @Html.EditorFor(model => model.Primary_CourtRefNo, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_RegistrationDate)
                        @Html.EditorFor(model => model.Primary_RegistrationDate, new { htmlAttributes = new { @class = "form-control datepicker" } })
                        @*@Html.ValidationMessageFor(model => model.Primary_RegistrationDate, "", new { @class = "text-danger" })*@
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_CourtDepartment)
                        @Html.DropDownList("Primary_CourtDepartment", null, htmlAttributes: new { @class = "form-control select2bs4" })

                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_JudgementReceivingDate)
                        @Html.EditorFor(model => model.Primary_JudgementReceivingDate, new { htmlAttributes = new { @class = "form-control datepicker" } })
                        @*@Html.ValidationMessageFor(model => model.Primary_JudgementReceivingDate, "", new { @class = "text-danger" })*@
                    </div>

                </div>
                <div class="col-6">

                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_CourtLocationid)
                        @Html.DropDownList("Primary_CourtLocationid", null, htmlAttributes: new { @class = "form-control select2bs4" })
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_CaseLevelCode)
                        <span class="form-control" disabled="disabled">@ViewBag.Primary_CaseLevelCode</span>
                        @Html.HiddenFor(model => model.Primary_CaseLevelCode)

                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_JudgementDate)
                        @Html.EditorFor(model => model.Primary_JudgementDate, new { htmlAttributes = new { @class = "form-control datepicker" } })
                        @*@Html.ValidationMessageFor(model => model.Primary_JudgementDate, "", new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="form-group">
                        @Html.LabelFor(model => model.Primary_JudgementDetails)
                        @Html.TextAreaFor(model => model.Primary_JudgementDetails, 3, 200, new { @class = "form-control" })
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="card-footer">
        <input class="btn btn-warning" type="button" id="Add_Primary_CourtDetail" value="Add Court Detail" />

    </div>
</div>

@*@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "frm_Primary_CourtDetail" }))
    {

    }*@




